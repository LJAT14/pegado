"use strict";(()=>{var e={};e.id=518,e.ids=[518],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},8696:(e,t,s)=>{s.r(t),s.d(t,{config:()=>p,default:()=>u,routeModule:()=>l});var r={};s.r(r),s.d(r,{default:()=>d});var a=s(1802),n=s(7153),o=s(6249);let i=(0,s(2885).createClient)(process.env.SUPABASE_URL,process.env.SUPABASE_ANON_KEY);async function d(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, PUT, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===e.method)return t.status(200).end();try{if("GET"===e.method){let{data:e,error:s}=await i.from("settings").select("*").eq("id",1).single();if(s||!e)return t.status(200).json({adminPassword:"duquesa2024",whatsappNumber:"+244943268336"});return t.status(200).json({adminPassword:e.admin_password,whatsappNumber:e.whatsapp_number})}if("PUT"===e.method){let s={};e.body.adminPassword&&(s.admin_password=e.body.adminPassword),e.body.whatsappNumber&&(s.whatsapp_number=e.body.whatsappNumber);let{data:r,error:a}=await i.from("settings").update(s).eq("id",1).select().single();if(a){let{data:s,error:r}=await i.from("settings").insert([{id:1,admin_password:e.body.adminPassword||"duquesa2024",whatsapp_number:e.body.whatsappNumber||"+244943268336"}]).select().single();if(r)throw r;return t.status(200).json({success:!0,settings:s})}return t.status(200).json({success:!0,settings:r})}return t.status(405).json({error:"Method not allowed"})}catch(e){return console.error("API Error:",e),t.status(500).json({error:e.message})}}let u=(0,o.l)(r,"default"),p=(0,o.l)(r,"config"),l=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/settings",pathname:"/api/settings",bundlePath:"",filename:""},userland:r})},7153:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,t,s)=>{e.exports=s(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var s=t(t.s=8696);module.exports=s})();